{% extends 'base.html.twig' %}

{% block title %}{{ title ?? 'Beiträge' }}{% endblock %}

{% block meta %}
    {% if canonical %}
        <link rel="canonical" href="{{ canonical }}">
    {% endif %}
{% endblock %}

{% block content %}
    <section>
        <div class="max-w-5xl mx-auto px-6 py-12">
            <h1 class="text-3xl font-bold text-gray-900 mb-8">
                {{ title ?? 'Beiträge' }}
            </h1>

            {% if posts is empty %}
                <p class="text-gray-600 italic">
                    {{ emptyText ?? 'Keine Beiträge gefunden.' }}
                </p>
            {% else %}
                <div class="grid gap-8">
                    {% for post in posts %}
                        <article class="bg-white border border-gray-200 rounded-lg shadow-sm p-6 transition hover:-translate-y-1 hover:shadow-md">
                            <a href="{{ path('blog_post_show', { slug: post.slug }) }}">
                                <h2 class="text-2xl font-bold text-gray-900 ">{{ post.title }}</h2>
                            </a>
                            <p class="text-sm text-gray-500 mt-1">
                                {{ post.createdAt|date('d. F Y') }} • von {{ post.author.username }}
                            </p>

                            {% if post.excerpt %}
                                <p class="mt-4 text-gray-700 line-clamp-3">{{ post.excerpt }}</p>
                            {% endif %}

                            {% if post.tags is not empty %}
                                <ul class="mt-4 flex flex-wrap gap-2">
                                    {% for tag in post.tags %}
                                        <li>
                                            <a href="{{ path('blog_post_by_tag', { slug: tag.slug }) }}"
                                               class="text-xs px-2 py-1 bg-gray-200 text-gray-800 rounded hover:bg-gray-300 transition">
                                                #{{ tag.name }}
                                            </a>
                                        </li>
                                    {% endfor %}
                                </ul>
                            {% endif %}
                        </article>
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </section>
{% endblock %}
